function RestaurantController(){this._init()}var reviewDialog,reviewDialogEl=document.getElementById("review-dialog"),dialogOverlay=document.querySelector(".dialog-overlay"),reviewForm=document.getElementById("review-form");RestaurantController.prototype.addReview=function(e,t,r,a){function i(e){for(var t="",r=0;r<5;r++)t+=r<e?'<i class="fa fa-star"></i>':'<i class="fa fa-star-o"></i>';return t}var n=document.querySelector(".ul-reviews"),o=i(r),l='<article class="review review--new" aria-live="polite">\t\t                <p class="review__author" rel="author">'+e+'</p>\t\t                <time class="review__date">'+momentDate(t)+'</time>\t\t                <p class="review__stars">\t\t                    <span class="sr-only">'+r+" out of 5 Stars</span>\t\t                    "+o+'\t\t                </p>\t\t                <p class="review__text">'+a+"</p>\t\t            </article>";n.insertAdjacentHTML("afterbegin",l)},RestaurantController.prototype._init=function(){var e=document.getElementById("restaurantPage");fetch("./data/restaurants.json").then(function(e){return e.json()}).then(function(t){for(var r,a=location.search.split("?r=")[1],i=0;i<t.restaurants.length;i++){var n=t.restaurants[i];if(a===n.id){r=n;break}}var o=MyApp.templates.restaurant(r);e.innerHTML=o,reviewDialog=new Dialog(reviewDialogEl,dialogOverlay,".open-review-dialog",null)})};var Restaurant=new RestaurantController;reviewForm.addEventListener("submit",function(e){e.preventDefault();var t=this.review_author.value,r=this.review_date.value,a=this.review_rating.value,i=this.review_text.value;!t|!r|!a|!i||(Restaurant.addReview(t,r,a,i),reviewDialog.close())});