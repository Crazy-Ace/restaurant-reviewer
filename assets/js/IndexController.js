function IndexController(){this._init()}IndexController.prototype._filter=function(t,e,r,n){return new Promise(function(a,i){for(var o=[],l=0;l<t.length;l++){var u=t[l],s=getReviewAvergae(u.reviews),d=!0,f=!0,c=!0;e&&"all"!==e&e!==u.location.area&&(d=!1),r&&"all"!==r&r!==u.cuisine&&(f=!1),n&&"all"!==n&n!==s&&(c=!1),d&&f&&c&&o.push(u)}a({restaurants:o})})},IndexController.prototype.filterRestaurants=function(t,e,r){var n=document.getElementById("restaurants");n.setAttribute("aria-busy","true"),fetch("/data/restaurants.json").then(function(t){return t.json()}).then(function(n){return Index._filter(n.restaurants,t,e,r)}).then(function(t){return n.removeAttribute("aria-busy"),0==t.restaurants.length?void(n.innerHTML="Sorry, we couldn't find any restaurants matching that criteria"):void(n.innerHTML=MyApp.templates.restaurantSnippet(t))})},IndexController.prototype._init=function(){var t=document.getElementById("restaurants");t.setAttribute("aria-busy","true"),fetch("/data/restaurants.json").then(function(t){return t.json()}).then(function(e){return 0==e.restaurants.length?void(t.innerHTML="Sorry, we couldn't find any restaurants matching that criteria"):void(t.innerHTML=MyApp.templates.restaurantSnippet(e))})};var Index=new IndexController,filterDialogEl=document.getElementById("filter-dialog"),dialogOverlay=document.querySelector(".dialog-overlay");new Dialog(filterDialogEl,dialogOverlay,".open-filter-dialog",".close-filter-dialog");var filterForm=document.getElementById("filter-form");filterForm.addEventListener("submit",function(t){t.preventDefault();var e=this.filter_location.value,r=this.filter_cuisine.value,n=this.filter_rating.value;Index.filterRestaurants(e,r,n)});