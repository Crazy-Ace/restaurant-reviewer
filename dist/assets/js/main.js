function Dialog(e,t,i,l){this.dialogEl=e,this.overlayEl=t,this.focusedElBeforeOpen;var o=this.dialogEl.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');this.focusableEls=Array.prototype.slice.call(o),this.firstFocusableEl=this.focusableEls[0],this.lastFocusableEl=this.focusableEls[this.focusableEls.length-1],this.elsToHide=document.querySelectorAll(".site-main, .site-header, .site-footer"),this.elsToHide=Array.prototype.slice.call(this.elsToHide),this.addEventListeners(i,l),this.close()}Dialog.prototype.open=function(){var e=this;this.dialogEl.removeAttribute("aria-hidden"),this.overlayEl.removeAttribute("aria-hidden");for(var t=0;t<this.elsToHide.length;t++)this.elsToHide[t].setAttribute("aria-hidden",!0);this.focusedElBeforeOpen=document.activeElement,this.dialogEl.addEventListener("keydown",function(t){e.handleKeyDown(t)}),this.overlayEl.addEventListener("click",function(){e.close()}),this.firstFocusableEl.focus()},Dialog.prototype.close=function(){for(var e=0;e<this.elsToHide.length;e++)this.elsToHide[e].removeAttribute("aria-hidden");this.dialogEl.setAttribute("aria-hidden",!0),this.overlayEl.setAttribute("aria-hidden",!0),this.focusedElBeforeOpen&&this.focusedElBeforeOpen.focus()},Dialog.prototype.handleKeyDown=function(e){function t(){document.activeElement===l.firstFocusableEl&&(e.preventDefault(),l.lastFocusableEl.focus())}function i(){document.activeElement===l.lastFocusableEl&&(e.preventDefault(),l.firstFocusableEl.focus())}var l=this,o=9,s=27;switch(e.keyCode){case o:if(1===l.focusableEls.length)return void e.preventDefault();e.shiftKey?t():i();break;case s:l.close()}},Dialog.prototype.addEventListeners=function(e,t){var i=this;if(e)for(var l=document.querySelectorAll(e),o=0;o<l.length;o++)l[o].addEventListener("click",function(){i.open()});if(t)for(var s=document.querySelectorAll(t),o=0;o<s.length;o++)s[o].addEventListener("click",function(){i.close()})};var momentDate=function(e){var t=e.split("-")[0],i=e.split("-")[1],l=e.split("-")[2],o=moment().year(t).month(i).date(l);return o=o.calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"[Next] dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"dddd Do MMMM"})};
function getReviewAvergae(e){if(!e)return 0;for(var r=0,a=0,t=0;t<e.length;t++)r+=parseInt(e[t].stars),a++;var n=Math.round(r/a);return n}Handlebars.registerHelper("reviewAvergaeIcons",function(e,r){for(var a=getReviewAvergae(e),t="",n=0;n<5;n++)t+=n<a?'<i class="fa fa-star"></i>':'<i class="fa fa-star-o"></i>';return new Handlebars.SafeString(t)}),Handlebars.registerHelper("reviewAvergaeNumber",function(e,r){return getReviewAvergae(e)}),Handlebars.registerHelper("reviewStars",function(e,r){for(var a=e,t="",n=0;n<5;n++)t+=n<a?'<i class="fa fa-star"></i>':'<i class="fa fa-star-o"></i>';return new Handlebars.SafeString(t)}),Handlebars.registerHelper("momentDate",function(e,r){var a=e,t=a.split("-")[0],n=a.split("-")[1],s=a.split("-")[2],i=moment().year(t).month(n).date(s);return i=i.calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"[Next] dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"dddd Do MMMM"})});
this.MyApp=this.MyApp||{},this.MyApp.templates=this.MyApp.templates||{},this.MyApp.templates.restaurant=Handlebars.template({1:function(a,n,e,s){var l,t=n.helperMissing,i="function",r=this.escapeExpression;return'                        <tr>\n                            <td class="day">'+r((l=null!=(l=n.day||(null!=a?a.day:a))?l:t,typeof l===i?l.call(a,{name:"day",hash:{},data:s}):l))+'</td>\n                            <td class="hours">'+r((l=null!=(l=n.start||(null!=a?a.start:a))?l:t,typeof l===i?l.call(a,{name:"start",hash:{},data:s}):l))+" - "+r((l=null!=(l=n.end||(null!=a?a.end:a))?l:t,typeof l===i?l.call(a,{name:"end",hash:{},data:s}):l))+"</td>\n                        </tr>\n"},3:function(a,n,e,s){var l,t=n.helperMissing,i="function",r=this.escapeExpression;return'            <article class="review">\n                <p class="review__author" rel="author">'+r((l=null!=(l=n.name||(null!=a?a.name:a))?l:t,typeof l===i?l.call(a,{name:"name",hash:{},data:s}):l))+'</p>\n                <time class="review__date">'+r((n.momentDate||a&&a.momentDate||t).call(a,null!=a?a.date:a,{name:"momentDate",hash:{},data:s}))+'</time>\n                <p class="review__stars">\n                    <span class="sr-only">'+r((l=null!=(l=n.stars||(null!=a?a.stars:a))?l:t,typeof l===i?l.call(a,{name:"stars",hash:{},data:s}):l))+" out of 5 Stars</span>\n                    "+r((n.reviewStars||a&&a.reviewStars||t).call(a,null!=a?a.stars:a,{name:"reviewStars",hash:{},data:s}))+'\n                </p>\n                <p class="review__text">'+r((l=null!=(l=n.review||(null!=a?a.review:a))?l:t,typeof l===i?l.call(a,{name:"review",hash:{},data:s}):l))+"</p>\n            </article>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,n,e,s){var l,t,i=n.helperMissing,r="function",c=this.escapeExpression,o=this.lambda;return'<header class="page-header">\n    <div class="wrapper">\n        <h2 class="page-title">\n            '+c((t=null!=(t=n.name||(null!=a?a.name:a))?t:i,typeof t===r?t.call(a,{name:"name",hash:{},data:s}):t))+'\n        </h2>\n    </div>\n</header>\n\n<div class="wrapper">\n    <section class="information">\n        <h3 class="sr-only">Information</h3>\n        <div class="information__img">\n            <img src="'+c((t=null!=(t=n.image||(null!=a?a.image:a))?t:i,typeof t===r?t.call(a,{name:"image",hash:{},data:s}):t))+'" alt="'+c((t=null!=(t=n.image_alt||(null!=a?a.image_alt:a))?t:i,typeof t===r?t.call(a,{name:"image_alt",hash:{},data:s}):t))+'">\n        </div>\n\n        <div class="information__content">\n            <section>\n                <h4><span class="sr-only">Location</span> <i class="fa fa-location-arrow"></i></h4>\n                <p>'+c(o(null!=(l=null!=a?a.location:a)?l.address_line_1:l,a))+",</p>\n                <p>"+c(o(null!=(l=null!=a?a.location:a)?l.area:l,a))+',</p>\n                <p>Lagos, Nigeria</p>\n            </section>\n            <section>\n                <h4><span class="sr-only">Cuisine</span> <i class="fa fa-cutlery"></i></h4>\n                <p>'+c((t=null!=(t=n.cuisine||(null!=a?a.cuisine:a))?t:i,typeof t===r?t.call(a,{name:"cuisine",hash:{},data:s}):t))+'</p>\n            </section>\n            <section>\n                <h4><span class="sr-only">Opening Hours</span> <i class="fa fa-clock-o"></i></h4>\n                <table class="opening-hours">\n                    <thead class="sr-only">\n                        <tr>\n                            <th>Day</th>\n                            <th>Times</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n'+(null!=(l=n.each.call(a,null!=a?a.opening_hours:a,{name:"each",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?l:"")+'                    </tbody>\n                </table>\n            </section>\n        </div>        \n    </section>\n    <ul class="restaurants" id="restaurants">\n        <!-- Default message -->         \n    </ul>\n</div>\n\n\n<section class="reviews">\n    <div class="wrapper">\n        <h3 class="page-title-lv2 reviews-header">Reviews</h3>\n        <button class="open-review-dialog floating-btn" type="button" aria-label="Open Dialog to Add a Review">\n                <i class="fa fa-pencil"></i>\n            </button>\n    </div>\n\n    <div class="reviews-list">\n        <div class="wrapper ul-reviews">\n'+(null!=(l=n.each.call(a,null!=a?a.reviews:a,{name:"each",hash:{},fn:this.program(3,s,0),inverse:this.noop,data:s}))?l:"")+"        </div>\n    </div>\n</section>\n\n"},useData:!0}),this.MyApp.templates.restaurantSnippet=Handlebars.template({1:function(a,n,e,s){var l,t,i=n.helperMissing,r="function",c=this.escapeExpression;return'<li class="restaurant">\n    <a href="./restaurant.html?r='+c((t=null!=(t=n.id||(null!=a?a.id:a))?t:i,typeof t===r?t.call(a,{name:"id",hash:{},data:s}):t))+'">\n        <img class="restaurant__img" src="'+c((t=null!=(t=n.image||(null!=a?a.image:a))?t:i,typeof t===r?t.call(a,{name:"image",hash:{},data:s}):t))+'" alt="">\n        <h3 class="restaurant__name">'+c((t=null!=(t=n.name||(null!=a?a.name:a))?t:i,typeof t===r?t.call(a,{name:"name",hash:{},data:s}):t))+'</h3>\n        <p class="restaurant__stars">\n            <span class="sr-only">'+c((n.reviewAvergaeNumber||a&&a.reviewAvergaeNumber||i).call(a,null!=a?a.reviews:a,{name:"reviewAvergaeNumber",hash:{},data:s}))+" out of 5 Stars</span>\n            "+(null!=(l=(n.reviewAvergaeIcons||a&&a.reviewAvergaeIcons||i).call(a,null!=a?a.reviews:a,{name:"reviewAvergaeIcons",hash:{},data:s}))?l:"")+'\n        </p>\n    </a>\n    <div class="restaurant_details">\n        <p>\n            <span class="detail-icon">\n                <span class="sr-only">Location</span>\n                <i class="fa fa-location-arrow"></i>\n            </span>\n            <span class="detail-text">\n                '+c(this.lambda(null!=(l=null!=a?a.location:a)?l.area:l,a))+'\n            </span>\n        </p>\n        <p>\n            <span class="detail-icon">\n                <span class="sr-only">Cuisine</span>\n                <i class="fa fa-cutlery"></i>\n            </span>\n            <span class="detail-text">\n                '+c((t=null!=(t=n.cuisine||(null!=a?a.cuisine:a))?t:i,typeof t===r?t.call(a,{name:"cuisine",hash:{},data:s}):t))+"\n            </span>\n        </p>\n    </div>\n</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,n,e,s){var l;return null!=(l=n.each.call(a,null!=a?a.restaurants:a,{name:"each",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?l:""},useData:!0});